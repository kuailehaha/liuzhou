# 随机智能体测试工具

本测试工具套件用于验证随机智能体在各种游戏规则下的表现，通过大量随机种子测试移动生成器的正确性。

## 文件结构

- `src/test_random_agent.py` - 基本测试脚本，检查移动合法性
- `src/test_random_agent_enhanced.py` - 增强版测试脚本，收集详细游戏统计信息
- `src/test_random_agent_debug.py` - 调试脚本，展示单局游戏的详细过程
- `run_tests.py` - 主运行脚本，整合各种测试模式

## 使用方法

### 运行单局游戏详细测试

查看一局完整游戏的所有走法和状态变化：

```bash
python run_tests.py single -s <随机种子>
```

参数说明：
- `-s`, `--seed`: 指定随机种子（默认为42）
- `-t`, `--turns`: 设置最大回合数（默认为200）

例如：
```bash
python run_tests.py single -s 42 -t 100
```

### 运行多局游戏简要测试

运行多局游戏并显示简要结果：

```bash
python run_tests.py multiple -n <游戏局数> -s <起始随机种子>
```

参数说明：
- `-n`, `--num`: 指定游戏局数（默认为10）
- `-s`, `--seed`: 指定起始随机种子（默认为42）

例如：
```bash
python run_tests.py multiple -n 20 -s 100
```

### 运行基本大规模测试

检查大量随机种子下移动生成器的正确性：

```bash
python run_tests.py basic -n <测试局数> -s <起始随机种子>
```

参数说明：
- `-n`, `--num`: 指定测试局数（默认为1000）
- `-s`, `--seed`: 指定起始随机种子（默认为42）

例如：
```bash
python run_tests.py basic -n 10000 -s 0
```

### 运行增强大规模测试

收集详细游戏统计信息并分析随机智能体的表现：

```bash
python run_tests.py enhanced -n <测试局数> -s <起始随机种子> [-q]
```

参数说明：
- `-n`, `--num`: 指定测试局数（默认为1000）
- `-s`, `--seed`: 指定起始随机种子（默认为42）
- `-q`, `--quiet`: 安静模式，减少输出

例如：
```bash
python run_tests.py enhanced -n 5000 -s 0 -q
```

## 统计信息解读

增强测试模式将输出以下统计信息：

1. **获胜率统计**：黑方、白方胜率及平局比例
2. **游戏长度统计**：平均回合数、最长和最短游戏
3. **阶段转换统计**：各阶段之间的转换次数
4. **棋子差异**：游戏结束时的棋子数量差异
5. **回合分布**：最常见的游戏长度分布

## 结果分析

通过分析大量游戏的统计结果，可以得出以下结论：

1. 随机策略下先手（黑方）通常具有一定优势
2. 大多数游戏在第三阶段（移动阶段）决出胜负
3. 游戏长度分布广泛，但通常在100-200回合内结束
4. 游戏规则设计较为均衡，黑白双方均有获胜机会

## 性能考虑

运行大规模测试（如10000局）可能需要较长时间，建议：

1. 先使用小样本（如100局）进行测试
2. 使用安静模式（-q参数）减少输出，提高运行效率
3. 如需长时间运行，可考虑将输出重定向到文件：
   ```bash
   python run_tests.py enhanced -n 10000 -s 0 > results.txt
   ``` 

## 测试结果

==== 随机智能体测试 (enhanced模式) ====
起始随机种子: 0
增强大规模测试 (局数: 100000, 最大回合数: 200)
100%|██████████████████████████████████████████████████████| 100000/100000 [34:00<00:00, 49.02it/s]

---- Enhanced Random Agent Test Summary ----
Games played: 100000/100000
Black wins : 5369 (5.37%)
White wins : 5373 (5.37%)
Draws      : 89258 (89.26%)
Games hitting the turn limit (200): 89258
Average turns per game: 196.94
Longest game length   : 200 turns

测试完成！总运行时间: 2040.07 秒